<template>
  <c-logger></c-logger>
  <lightning-card
    title="L4L Assigned Client Objectives - now with Modal editing"
    icon-name="custom:custom63"
  >
    <div class="c-container">
      <lightning-layout multiple-rows="true">
        <lightning-layout-item padding="around-small" size="12">
          <template if:true={areDetailsVisible}>
            <section
              role="dialog"
              tabindex="-1"
              aria-modal="true"
              aria-labelledby="modal-heading-01"
              class="slds-modal slds-fade-in-open"
            >
              <div class="slds-modal__container">
                <button
                  class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                >
                  <label>Close</label>
                  <svg
                    class="slds-button__icon slds-button__icon_large"
                    aria-hidden="true"
                  >
                    <use
                      xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#close"
                    ></use>
                  </svg>
                  <span class="slds-assistive-text">Cancel and close</span>
                </button>
                <div class="slds-modal__header">
                  <h1
                    id="modal-heading-01"
                    class="slds-modal__title slds-hyphenate"
                  >
                    Client Objective Details
                  </h1>
                </div>
                <div
                  class="slds-modal__content slds-var-p-around_medium"
                  id="modal-content-id-1"
                >
                  <lightning-record-form
                    record-id={COrecordId}
                    object-api-name={COobjectApiName}
                    columns="2"
                    mode="edit"
                    onsuccess={handleSuccess}
                    oncancel={handleCancel}
                    layout-type="Full"
                  >
                  </lightning-record-form>
                </div>
                <div class="slds-modal__footer">
                  <button
                    class="slds-button slds-button_neutral"
                    aria-label="Close"
                    onclick={handleClose}
                  >
                    Close
                  </button>
                </div>
              </div>
            </section>
            <div
              class="slds-backdrop slds-backdrop_open"
              role="presentation"
            ></div>
          </template>

          &nbsp;&nbsp;
          <input
            size="45"
            type="search"
            placeholder="New! Filter across all fields"
            oninput={handleSearchKeyInput}
          />
          <lightning-button
            label="Refresh"
            title="Refresh"
            onclick={handleClick}
            class="slds-var-m-left_x-small"
          ></lightning-button>
          <br /><br />
          <lightning-datatable
            hide-checkbox-column
            key-field="Id"
            data={clientobjectives}
            columns={columns}
            onrowaction={confirmation}
          >
          </lightning-datatable>
        </lightning-layout-item>
      </lightning-layout>
    </div>
  </lightning-card>
</template>
