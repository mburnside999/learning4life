<template>
  <lightning-card
    title="L4L Assigned Client Objectives - NEW! As of May 31st, Weekly and Fortnightly buttons"
    icon-name="custom:custom63"
  >
    <div class="c-container">
      <lightning-layout>
        <lightning-layout-item padding="around-small" size="12">
          <template if:true={isModalEditFormVisible}>
            <section
              role="dialog"
              tabindex="-1"
              aria-modal="true"
              aria-labelledby="modal-heading-01"
              class="slds-modal slds-fade-in-open"
            >
              <div class="slds-modal__container">
                <div class="slds-modal__header">
                  <h1
                    id="modal-heading-01"
                    class="slds-modal__title slds-hyphenate"
                  >
                    Client Objective Details
                  </h1>
                </div>
                <div
                  class="slds-modal__content slds-var-p-around_medium"
                  id="modal-content-id-1"
                >
                  <lightning-record-form
                    record-id={COrecordId}
                    object-api-name={COobjectApiName}
                    columns="2"
                    mode="edit"
                    onsuccess={handleSuccess}
                    oncancel={handleCancel}
                    layout-type="Full"
                  >
                  </lightning-record-form>
                </div>
                <div class="slds-modal__footer">
                  <button
                    class="slds-button slds-button_neutral"
                    aria-label="Close"
                    onclick={handleClose}
                  >
                    Close
                  </button>
                </div>
              </div>
            </section>
            <div
              class="slds-backdrop slds-backdrop_open"
              role="presentation"
            ></div>
          </template>
        </lightning-layout-item>
      </lightning-layout>
      <lightning-layout>
        <lightning-layout-item padding="around-small">
          <div
            class="custom-box slds-box slds-var-p-around_medium slds-text-align_center"
          >
            <input
              size="45"
              type="search"
              placeholder="Filter across all fields"
              oninput={handleSearchKeyInput}
            />
          </div>
        </lightning-layout-item>
        <lightning-layout-item padding="around-small">
          <div
            class="custom-box slds-box slds-var-p-around_medium slds-text-align_center"
          >
            <lightning-input
              type="checkbox"
              label="Show Active Only"
              checked={showActiveOnly}
              onchange={handleActiveCheckboxChange}
            >
            </lightning-input>
          </div>
        </lightning-layout-item>

        <lightning-layout-item padding="around-small">
          <div
            class="custom-box slds-box slds-var-p-around_medium slds-text-align_center"
          >
            <div class="slds-text-heading_small">
              <div class="slds-text-color_success">
                Active({activeCOCount}) + Inactive({inactiveCOCount}) =
                Total({totalCOCount}), Displaying({recs})
              </div>
            </div>
          </div>
        </lightning-layout-item>
      </lightning-layout>
      <lightning-layout>
        <lightning-layout-item padding="around-small">
          <lightning-button-group>
            <lightning-button
              label="Mark ACQ"
              title="Mark ACQ"
              onclick={btnConfirmation}
            >
            </lightning-button>
            <lightning-button
              label="Mark OBJ"
              title="Mark OBJ"
              onclick={btnConfirmation}
            >
            </lightning-button>
            <lightning-button
              label="Re-Test Weekly"
              title="Re-Test Weekly"
              onclick={btnConfirmation}
            >
            </lightning-button>
            <lightning-button
              label="Re-Test Fortnightly"
              title="Re-Test Fortnightly"
              onclick={btnConfirmation}
            >
            </lightning-button>
            <lightning-button
              label="Activate"
              title="Activate"
              onclick={btnConfirmation}
            >
            </lightning-button>
            <lightning-button
              label="De-Activate"
              title="De-Activate"
              onclick={btnConfirmation}
            >
            </lightning-button>
          </lightning-button-group>
        </lightning-layout-item>
      </lightning-layout>

      <lightning-layout>
        <lightning-layout-item padding="around-small">
          <div>
            <lightning-datatable
              key-field="Id"
              data={clientobjectives}
              columns={columns}
              onrowaction={confirmation}
              onrowselection={getSelectedName}
            >
            </lightning-datatable>
          </div>
        </lightning-layout-item>
      </lightning-layout>
    </div>
  </lightning-card>
</template>
